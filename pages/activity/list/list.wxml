<!--
@Author:       陆飞
@Date:           2018-03-21
@Introduce:  活动页面
l-->

<scroll-view class="container" scroll-y="true" bindscroll="scroll" scroll-top="{{scrollTop}}" bindscrolltolower="scrolltolower">
  <!-- 头部 -->
  <view class="head">
  <text>参加活动</text><navigator open-type="redirect" wx:if="{{!overtime}}" hover-class="none" class="fr" url="../vote/vote?aid={{aid}}"><icon class="iconfont icon-paizhao"></icon></navigator>
  </view>

  <!-- 轮播图 -->
  <view class="images">
      <swiper style="height:{{imageHeight}}" indicator-dots="{{false}}" autoplay="{{true}}" interval="{{2000}}" duration="{{500}}" circular="{{true}}">
        <block wx:for="{{imageList}}" wx:key="{{index}}">
          <swiper-item>
            <image style="height:{{imageHeight}}" src="{{item}}" class="slide-image"/>
          </swiper-item>
        </block>
      </swiper>
  </view> 

  <!-- 警告 -->
  <view wx:if="{{aid !== '3'}}"><navigator url="../detail/detail?id={{aid}}" hover-class="active" class="warm">集赞赢奖品 <i class="fr iconfont icon-arrow-right-copy-copy-copy"></i></navigator></view>

  <view class="sort">共 {{list.totalNumber}} 条 <i bindtap="switchSort" class="fr iconfont icon-tubiao-">{{sort === '1' ? '时间排序' : '点赞量排序'}}</i></view>

  <!-- 列表 -->
   <view wx:for="{{list.dataList}}" wx:key="{{index}}">
    <view class="list">
      <!-- 头像 -->
      <image class="portrait" src="{{item.headerimg || 'data:image/jpeg;base64,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'}}"></image>

      <view class="txt">
        <view class="blue">{{item.nickName || '未定义'}} <button class="fr iconfont icon-fenxiang green" open-type="share"></button></view>

        <view class="{{!item.isShow ? 'hidden-clamp3' : ''}}">{{item.title}}</view>

        <image wx:if="{{item.fileType === 1}}" bindtap="previewImage" data-image="{{item.photo}}"  mode="widthFix" src="{{item.photo}}"></image>

        <view bindtap="playVideo" wx:if="{{item.fileType === 2}}" class="video" data-video="{{item.photo}}"><icon data-video="{{item.photo}}" class="iconfont icon-bofang"></icon></view>
      </view>

      <view class="tools"><text class="fl">{{item.createTime}}</text><i bindtap="showComment" data-id="{{item.id}}" class="iconfont icon-zixun1"></i><i data-count="{{index}}" class="iconfont icon-ai45 {{item.isComment ? 'green' : ''}}" data-id="{{item.id}}" bindtap="setComment"></i>{{item.supportNums}}</view>

      <!-- 评价 -->
      <view wx:if="{{item.messageList.length > 0}}" class="comment {{!item.isShow ? 'overflow' : ''}}">
        <view wx:for="{{item.messageList}}" wx:key="{{count}}" wx:for-item="obj" class="{{!obj.isShow ? 'hidden-clamp2' : ''}}"><text class="blue">{{obj.nickName}} : </text>{{obj.messageInfo}}</view>
      </view>

      <view class="gray" data-count="{{index}}" bindtap="isShowMore">{{item.isShow ? '隐藏' : '全文'}}</view>
    </view>
  </view>

  <!-- 返回顶部 -->
  <view class="top" wx:if="{{top}}"><icon bindtap="scrollTop" class="iconfont icon-ai-top"></icon></view>

  <!-- 评论 -->
  <view class="send {{comment ? 'slide-t' : 'slide-b'}}">
    <input placeholder="说点啥呗..." bindinput="inputContent" value="{{content}}"></input><label class="s-btn" wx:if="{{content !== ''}}" bindtap="sendComment">提交</label><label wx:if="{{content === ''}}" class="c-btn" bindtap="hideComment">取消</label>
  </view>
</scroll-view>

<view bindtap="cancelVideo" class="play" wx:if="{{play}}"><video id="video" poster="https://api.zlwon.com/upload/15221/banner1.jpg" src="{{video}}" autoplay="{{true}}" objectFit="contain" controls></video></view>
